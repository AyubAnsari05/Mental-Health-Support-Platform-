<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Support Platform - Dashboard</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="../images/Copilot_20250801_123535.png" alt="logo" class="logo">
                <h2>Mental Health</h2>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item active">
                    <a href="#dashboard" class="nav-link">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#resources" class="nav-link">
                        <i class="fas fa-book"></i>
                        <span>Resources</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#journal" class="nav-link">
                        <i class="fas fa-pen"></i>
                        <span>Journal</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#forum" class="nav-link">
                        <i class="fas fa-comments"></i>
                        <span>Forum</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#chat" class="nav-link">
                        <i class="fas fa-comment-dots"></i>
                        <span>Chat</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#mood" class="nav-link">
                        <i class="fas fa-chart-line"></i>
                        <span>Mood Tracker</span>
                    </a>
                </li>
                <li class="nav-item admin-only" style="display: none;">
                    <a href="#admin" class="nav-link">
                        <i class="fas fa-cog"></i>
                        <span>Admin</span>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <img src="../images/default-avatar.png" alt="User Avatar" class="user-avatar">
                    <div class="user-details">
                        <span class="user-name">Loading...</span>
                        <span class="user-role">Student</span>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 id="page-title">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">0</span>
                    </div>
                    <div class="user-menu">
                        <img src="../images/default-avatar.png" alt="User" class="header-avatar">
                        <span class="header-username">Loading...</span>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="content-area">
                <!-- Dashboard Overview -->
                <section id="dashboard-section" class="section active">
                    <div class="dashboard-grid">
                        <!-- Welcome Card -->
                        <div class="card welcome-card">
                            <div class="card-content">
                                <h2>Welcome back!</h2>
                                <p>How are you feeling today?</p>
                                <div class="mood-quick-track">
                                    <button class="mood-btn" data-mood="very-happy">üòä</button>
                                    <button class="mood-btn" data-mood="happy">üôÇ</button>
                                    <button class="mood-btn" data-mood="neutral">üòê</button>
                                    <button class="mood-btn" data-mood="sad">üòî</button>
                                    <button class="mood-btn" data-mood="very-sad">üò¢</button>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats -->
                        <div class="card stats-card">
                            <h3>Your Stats</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <span class="stat-number" id="journal-count">0</span>
                                    <span class="stat-label">Journal Entries</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="mood-streak">0</span>
                                    <span class="stat-label">Day Streak</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="resources-read">0</span>
                                    <span class="stat-label">Resources Read</span>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="card activity-card">
                            <h3>Recent Activity</h3>
                            <div class="activity-list" id="recent-activity">
                                <div class="activity-item">
                                    <i class="fas fa-info-circle"></i>
                                    <span>No recent activity</span>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="card actions-card">
                            <h3>Quick Actions</h3>
                            <div class="actions-grid">
                                <button class="action-btn" onclick="navigateTo('journal')">
                                    <i class="fas fa-pen"></i>
                                    <span>Write Journal</span>
                                </button>
                                <button class="action-btn" onclick="navigateTo('resources')">
                                    <i class="fas fa-book"></i>
                                    <span>Browse Resources</span>
                                </button>
                                <button class="action-btn" onclick="navigateTo('forum')">
                                    <i class="fas fa-comments"></i>
                                    <span>Join Discussion</span>
                                </button>
                                <button class="action-btn" onclick="navigateTo('chat')">
                                    <i class="fas fa-comment-dots"></i>
                                    <span>Chat Support</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Resources Section -->
                <section id="resources-section" class="section">
                    <div class="section-header">
                        <h2>Mental Health Resources</h2>
                        <div class="section-actions">
                            <select id="category-filter" class="filter-select">
                                <option value="">All Categories</option>
                                <option value="stress-management">Stress Management</option>
                                <option value="anxiety">Anxiety</option>
                                <option value="depression">Depression</option>
                                <option value="motivation">Motivation</option>
                                <option value="mindfulness">Mindfulness</option>
                                <option value="self-care">Self Care</option>
                            </select>
                            <input type="text" id="search-resources" placeholder="Search resources..." class="search-input">
                        </div>
                    </div>
                    <div class="resources-grid" id="resources-container">
                        <!-- Resources will be loaded here -->
                    </div>
                </section>

                <!-- Journal Section -->
                <section id="journal-section" class="section">
                    <div class="section-header">
                        <h2>Journal & Feelings Wall</h2>
                        <button class="btn primary" onclick="showJournalModal()">
                            <i class="fas fa-plus"></i> New Entry
                        </button>
                    </div>
                    <div class="journal-tabs">
                        <button class="tab-btn active" data-tab="my-entries">My Entries</button>
                        <button class="tab-btn" data-tab="feelings-wall">Feelings Wall</button>
                    </div>
                    <div class="journal-content" id="journal-container">
                        <!-- Journal entries will be loaded here -->
                    </div>
                </section>

                <!-- Forum Section -->
                <section id="forum-section" class="section">
                    <div class="section-header">
                        <h2>Peer Support Forum</h2>
                        <button class="btn primary" onclick="showForumModal()">
                            <i class="fas fa-plus"></i> New Post
                        </button>
                    </div>
                    <div class="forum-categories">
                        <button class="category-btn active" data-category="">All</button>
                        <button class="category-btn" data-category="academic-stress">Academic Stress</button>
                        <button class="category-btn" data-category="relationships">Relationships</button>
                        <button class="category-btn" data-category="anxiety">Anxiety</button>
                        <button class="category-btn" data-category="depression">Depression</button>
                        <button class="category-btn" data-category="self-care">Self Care</button>
                    </div>
                    <div class="forum-posts" id="forum-container">
                        <!-- Forum posts will be loaded here -->
                    </div>
                </section>

                <!-- Chat Section -->
                <section id="chat-section" class="section">
                    <div class="chat-container">
                        <div class="chat-sidebar">
                            <div class="chat-header">
                                <h3>Conversations</h3>
                                <button class="btn small" onclick="showNewChatModal()">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="chat-list" id="chat-list">
                                <!-- Chat list will be loaded here -->
                            </div>
                        </div>
                        <div class="chat-main">
                            <div class="chat-placeholder" id="chat-placeholder">
                                <i class="fas fa-comments"></i>
                                <h3>Select a conversation to start chatting</h3>
                                <p>Connect with counsellors or peer mentors for support</p>
                            </div>
                            <div class="chat-messages" id="chat-messages" style="display: none;">
                                <div class="chat-header">
                                    <h3 id="chat-title">Chat</h3>
                                </div>
                                <div class="messages-container" id="messages-container">
                                    <!-- Messages will be loaded here -->
                                </div>
                                <div class="message-input">
                                    <input type="text" id="message-input" placeholder="Type your message...">
                                    <button id="send-message-btn">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Mood Tracker Section -->
                <section id="mood-section" class="section">
                    <div class="section-header">
                        <h2>Mood Tracker</h2>
                        <button class="btn primary" onclick="showMoodModal()">
                            <i class="fas fa-plus"></i> Log Mood
                        </button>
                    </div>
                    <div class="mood-overview">
                        <div class="mood-card">
                            <h3>Today's Mood</h3>
                            <div class="today-mood" id="today-mood">
                                <span>No mood logged today</span>
                            </div>
                        </div>
                        <div class="mood-card">
                            <h3>Mood Trends</h3>
                            <canvas id="mood-chart"></canvas>
                        </div>
                        <div class="mood-card">
                            <h3>Mood Statistics</h3>
                            <div class="mood-stats" id="mood-stats">
                                <!-- Mood statistics will be loaded here -->
                            </div>
                        </div>
                    </div>
                    <div class="mood-history">
                        <h3>Mood History</h3>
                        <div class="mood-entries" id="mood-entries">
                            <!-- Mood entries will be loaded here -->
                        </div>
                    </div>
                </section>

                <!-- Admin Section -->
                <section id="admin-section" class="section">
                    <div class="section-header">
                        <h2>Admin Dashboard</h2>
                    </div>
                    <div class="admin-grid">
                        <div class="admin-card">
                            <h3>User Management</h3>
                            <div class="admin-stats">
                                <div class="stat">
                                    <span class="number" id="total-users">0</span>
                                    <span class="label">Total Users</span>
                                </div>
                                <div class="stat">
                                    <span class="number" id="active-users">0</span>
                                    <span class="label">Active Users</span>
                                </div>
                            </div>
                            <button class="btn secondary" onclick="loadUserManagement()">Manage Users</button>
                        </div>
                        <div class="admin-card">
                            <h3>Content Moderation</h3>
                            <div class="admin-stats">
                                <div class="stat">
                                    <span class="number" id="flagged-journals">0</span>
                                    <span class="label">Flagged Journals</span>
                                </div>
                                <div class="stat">
                                    <span class="number" id="flagged-forums">0</span>
                                    <span class="label">Flagged Posts</span>
                                </div>
                            </div>
                            <button class="btn secondary" onclick="loadModeration()">Review Content</button>
                        </div>
                        <div class="admin-card">
                            <h3>Analytics</h3>
                            <div class="admin-stats">
                                <div class="stat">
                                    <span class="number" id="total-resources">0</span>
                                    <span class="label">Resources</span>
                                </div>
                                <div class="stat">
                                    <span class="number" id="total-views">0</span>
                                    <span class="label">Total Views</span>
                                </div>
                            </div>
                            <button class="btn secondary" onclick="loadAnalytics()">View Analytics</button>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="journal-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Journal Entry</h3>
                <span class="close" onclick="closeModal('journal-modal')">&times;</span>
            </div>
            <form id="journal-form">
                <div class="form-group">
                    <label for="journal-mood">How are you feeling?</label>
                    <select id="journal-mood" required>
                        <option value="">Select your mood</option>
                        <option value="very-happy">Very Happy üòä</option>
                        <option value="happy">Happy üôÇ</option>
                        <option value="neutral">Neutral üòê</option>
                        <option value="sad">Sad üòî</option>
                        <option value="very-sad">Very Sad üò¢</option>
                        <option value="anxious">Anxious üò∞</option>
                        <option value="stressed">Stressed üò§</option>
                        <option value="excited">Excited ü§©</option>
                        <option value="calm">Calm üòå</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="journal-content">What's on your mind?</label>
                    <textarea id="journal-content" rows="5" placeholder="Share your thoughts, feelings, or experiences..." required></textarea>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="journal-anonymous" checked>
                        Post anonymously
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="journal-public" checked>
                        Share on feelings wall
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn secondary" onclick="closeModal('journal-modal')">Cancel</button>
                    <button type="submit" class="btn primary">Post Entry</button>
                </div>
            </form>
        </div>
    </div>

    <div id="forum-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Forum Post</h3>
                <span class="close" onclick="closeModal('forum-modal')">&times;</span>
            </div>
            <form id="forum-form">
                <div class="form-group">
                    <label for="forum-title">Title</label>
                    <input type="text" id="forum-title" required>
                </div>
                <div class="form-group">
                    <label for="forum-category">Category</label>
                    <select id="forum-category" required>
                        <option value="">Select category</option>
                        <option value="academic-stress">Academic Stress</option>
                        <option value="relationships">Relationships</option>
                        <option value="anxiety">Anxiety</option>
                        <option value="depression">Depression</option>
                        <option value="self-care">Self Care</option>
                        <option value="motivation">Motivation</option>
                        <option value="general">General</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="forum-description">Description</label>
                    <textarea id="forum-description" rows="5" placeholder="Share your thoughts or ask for advice..." required></textarea>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="forum-anonymous" checked>
                        Post anonymously
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn secondary" onclick="closeModal('forum-modal')">Cancel</button>
                    <button type="submit" class="btn primary">Create Post</button>
                </div>
            </form>
        </div>
    </div>

    <div id="mood-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Log Your Mood</h3>
                <span class="close" onclick="closeModal('mood-modal')">&times;</span>
            </div>
            <form id="mood-form">
                <div class="form-group">
                    <label for="mood-type">How are you feeling?</label>
                    <select id="mood-type" required>
                        <option value="">Select your mood</option>
                        <option value="very-happy">Very Happy üòä</option>
                        <option value="happy">Happy üôÇ</option>
                        <option value="neutral">Neutral üòê</option>
                        <option value="sad">Sad üòî</option>
                        <option value="very-sad">Very Sad üò¢</option>
                        <option value="anxious">Anxious üò∞</option>
                        <option value="stressed">Stressed üò§</option>
                        <option value="excited">Excited ü§©</option>
                        <option value="calm">Calm üòå</option>
                        <option value="angry">Angry üò†</option>
                        <option value="frustrated">Frustrated üò§</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="mood-intensity">Intensity (1-10)</label>
                    <input type="range" id="mood-intensity" min="1" max="10" value="5">
                    <span id="intensity-value">5</span>
                </div>
                <div class="form-group">
                    <label for="mood-activities">Activities Today</label>
                    <div class="activities-grid">
                        <label><input type="checkbox" value="exercise"> Exercise</label>
                        <label><input type="checkbox" value="meditation"> Meditation</label>
                        <label><input type="checkbox" value="socializing"> Socializing</label>
                        <label><input type="checkbox" value="studying"> Studying</label>
                        <label><input type="checkbox" value="sleeping"> Sleeping</label>
                        <label><input type="checkbox" value="eating"> Eating</label>
                        <label><input type="checkbox" value="hobby"> Hobby</label>
                        <label><input type="checkbox" value="work"> Work</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mood-notes">Additional Notes</label>
                    <textarea id="mood-notes" rows="3" placeholder="Any additional thoughts..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn secondary" onclick="closeModal('mood-modal')">Cancel</button>
                    <button type="submit" class="btn primary">Log Mood</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../js/dashboard.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html> 